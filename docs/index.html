<!doctype html><html lang=ja dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>B-Hood Tech Blog</title><meta name=keywords content><meta name=description content><meta name=author content="Tomoyuki Hata"><link rel=canonical href=https://b-hood.site/><link href=https://b-hood.site/assets/css/stylesheet.min.08d6f2005b6ce4ed10207916c0411c66e66f2201e3f7a56e8fb2ccbc4a8b259c.css integrity="sha256-CNbyAFts5O0QIHkWwEEcZuZvIgHj96Vuj7LMvEqLJZw=" rel="preload stylesheet" as=style><link rel=icon href=https://b-hood.site/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://b-hood.site/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://b-hood.site/favicon-32x32.png><link rel=apple-touch-icon href=https://b-hood.site/favicon.png><link rel=mask-icon href=https://b-hood.site/favicon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.78.2"><link rel=alternate type=application/rss+xml href=https://b-hood.site/index.xml><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','G-LKJ5YTFF5L','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><meta property="og:title" content="B-Hood Tech Blog"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://b-hood.site/"><meta property="og:image" content="https://b-hood.site/favicon.png"><meta property="og:updated_time" content="2020-11-21T22:19:40+09:00"><meta property="og:site_name" content="B-Hood Tech Blog"><meta name=twitter:card content="summary"><meta name=twitter:image content="https://b-hood.site/favicon.png"><meta name=twitter:title content="B-Hood Tech Blog"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"B-Hood Tech Blog","url":"https://b-hood.site/","description":"","thumbnailUrl":"https://b-hood.site/favicon.png","sameAs":["https://twitter.com/hata6502","https://github.com/hata6502"]}</script></head><body class="list home" id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><noscript><style type=text/css>.theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://b-hood.site/ accesskey=h><img src=/favicon.png alt=logo aria-label=logo height=35>B-Hood Tech Blog</a>
<span class=logo-switches><span class=theme-toggle><a id=theme-toggle accesskey=t><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></a></span></span></div><ul class=menu id=menu onscroll=menu_on_scroll()></ul></nav></header><main class=main><article class="first-entry home-info"><header class=entry-header><h2>Welcome to B-Hood Tech Blog 🐆</h2></header><section class=entry-content><p></p></section><footer class=entry-footer><div class=social-icons><a href=https://twitter.com/hata6502 target=_blank rel="noopener noreferrer me" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a href=https://github.com/hata6502 target=_blank rel="noopener noreferrer me" title=Github><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></div></footer></article><article class=post-entry><header class=entry-header><h2>VSCode で true と false の色分け</h2></header><section class=entry-content><p>boolean の mapping を書くと true と false が見づらいため、 VSCode で true を緑、false を 赤 で表示して見やすくします。
settings.json
"editor.tokenColorCustomizations": { "textMateRules": [ { "scope": "constant.language.boolean.false", "settings": { "foreground": "#D3569B" } }, { "scope": "constant.language.boolean.true", "settings": { "foreground": "#9BD356" } }, ] } ...</p></section><footer class=entry-footer>November 21, 2020&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Tomoyuki Hata</footer><a class=entry-link aria-label="post link to VSCode で true と false の色分け" href=https://b-hood.site/articles/vscode-boolean-colorize/></a></article><article class=post-entry><header class=entry-header><h2>browserslist-config-google でモダンブラウザ向け最適化をする</h2></header><section class=entry-content><p>browserslist のデフォルトは、IE 11 も含まれていてさすがにモダンじゃないなーと感じます。 個人的には Babel だけで自動的に IE 対応することは難しいと考えているため、 いっそのこと browserslist からレガシーブラウザを切り捨てます。
$ browserslist "defaults" and_chr 85 and_ff 79 and_qq 10.4 and_uc 12.12 android 81 baidu 7.12 chrome 86 chrome 85 chrome 84 edge 86 edge 85 firefox 82 firefox 81 firefox 80 firefox 78 ie 11 ios_saf 14 ios_saf 13.4-13.7 ios_saf 13.3 ios_saf 12.2-12.4 kaios 2.5 op_mini all op_mob 59 opera 71 opera 70 safari 14 safari 13.1 samsung 12....</p></section><footer class=entry-footer>November 4, 2020&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Tomoyuki Hata</footer><a class=entry-link aria-label="post link to browserslist-config-google でモダンブラウザ向け最適化をする" href=https://b-hood.site/articles/browserslist-config-google/></a></article><article class=post-entry><header class=entry-header><h2>【アーカイブ】How to make grid layout in Editor.js</h2></header><section class=entry-content><p>&lt;ins class=“adsbygoogle” style=“display:block"ｌｓ data-ad-client=“ca-pub-7008780049786244” data-ad-slot=“5063315418” data-ad-format=“auto” data-full-width-responsive=“true”>Use Editor.js more flexibly Editor.js is one of block editors. The article data format is JSON not HTML, so it can manage article data more cleanly and formally.
Editor.js can’t nest blocks to keep simplicity. So it is useful for general articles that blogs, news and so on. But difficult for special layout that landing page and so on.
Therefore, I published a grid layout plugin for Editor....</p></section><footer class=entry-footer>1 min&nbsp;·&nbsp;Tomoyuki Hata</footer><a class=entry-link aria-label="post link to 【アーカイブ】How to make grid layout in Editor.js" href=https://b-hood.site/articles/editor-js-grid/></a></article><article class=post-entry><header class=entry-header><h2>【アーカイブ】ImageMagickで16:9トリミングを自動化</h2></header><section class=entry-content><p>皆さんは画像を SNS や自身のブログなどに投稿する際に加工したことはないでしょうか？ Twitter では画像が自動的に 16:9 で表示されるため、あらかじめ 16:9 でトリミングしておくことでどのように表示されるかを調整できます。 トリミング機能は Android 版にはありますが Web 版にはないため、PC からの画像投稿のときに少し面倒に感じたりします。
画像編集の自動化といえば ImageMagick そこで GIMP などの画像編集ソフトが必要になりますが、私は ImageMagick を利用しています。 画像の加工を自動で行うためのコマンドラインが用意されており、たとえば以下のようにすれば png ファイルを一括で余白トリミングできます。 GIMP でいう「最小枠で切り抜き」機能ですね。
画像サイズを指定しての切り抜きは ImageMagick の crop オプションを使います。 座標 (X, Y) の位置で幅 W px、高さ H px のトリミングをするには以下のコマンドを打ちます。
しかし、残念ながら比率（16:9 など）の指定によるトリミングには対応していません。 そこで、比率指定によるトリミングのコマンドをシェルスクリプトで作りました。
trimrate コマンドを作ってみた 結論から言うと、比率指定によるトリミングコマンドを以下のように作りました。
このシェルスクリプトを trimrate というファイル名で保存します。 保存先は /usr/local/bin などのパスが通っているところが便利です。 そして chmod +x trimrate で実行権限を与えて以下の構文でトリミングを行います。
コマンドの動作的には、比率から切り抜きの幅高さを計算して ImageMagick の crop 機能を呼び出しているだけです。 デフォルトだと画像の上部でトリミングするため、-gravity center オプションを加えて中央でトリミングしています。
for 文で一括処理する trimrate コマンドだけだと mogrify のように複数のファイルを一括処理できません。 しかし、bash の for 文で画像ファイルごとに trimrate を実行して一括処理させることはできます。...</p></section><footer class=entry-footer>1 min&nbsp;·&nbsp;Tomoyuki Hata</footer><a class=entry-link aria-label="post link to 【アーカイブ】ImageMagickで16:9トリミングを自動化" href=https://b-hood.site/articles/trimrate/></a></article><article class=post-entry><header class=entry-header><h2>【アーカイブ】webp 画像形式でファイルサイズが 92% 削減された</h2></header><section class=entry-content><p>皆さんこんにちは 😀 私はいま作っているこのサイトでは、シンプルかつこだわりをもってあれこれやっているつもりです。 そのひとつとして、Google の PageSpeed Insightsというものを利用しています。 これはページの読み込み速度をスコアリングして、さらにスピードを改善するためのアドバイスもしてくれるすばらしいツールです。 ページスピードは Web 検索にも影響すると言われ、サイトを運営している方であれば多くの人が活用できるのではないでしょうか？ この記事では、読み込み速度改善の 1 つとしてWebp 画像形式の導入について紹介したいと思います。
まずはページスピードを測定 まずは自分の Web サイトの状況を確認するために、PageSpeed Insights を使います。 サイトの URL を入力して測定するだけで、数十秒後にはスコアが表示されると思います。 なお、PageSpeed Insights はモバイルと PC に分けて測定、スコアリングするため、両方確認する必要があります。
私のサイトでは、まず重要な箇所としてランディングページ (LP) の測定をしてみました。 LP には特にコンテンツもなく負荷が軽いので、スコア 90 点超えの良い結果となりました。
しかし、記事一覧ページでは 80 点台という標準的な結果でした。
こんなとき、Google はスピード改善のための提案をしてくれます。 そこに「次世代フォーマットでの画像の配信」というものがありました。 これは、Web サイトに埋め込まれている jpg や png などの形式の画像を、 jpeg2000 や Webp という画像形式に置き換えることで通信負荷が抑えられることを意味しています。 さらに、次世代フォーマットを導入することによるファイルサイズの削減量まで教えてくれるといういたわり尽くせリです。
Webp 形式に変換する というわけで、さっそく Web サイト中のあらゆる png, JPEG ファイルを Webp に変換してみました。 Ubuntu をお使いの方は、以下のコマンドで Webp に変換するコマンドをインストールできます。
そして、以下のコマンドで png, JPEG ファイルを一括で Webp ファイルに変換できます。 なお、cwebp コマンドは変換のクオリティがデフォルトで 80% に設定されています。 コマンドオプションを追加して、クオリティを変更することも可能です。...</p></section><footer class=entry-footer>1 min&nbsp;·&nbsp;Tomoyuki Hata</footer><a class=entry-link aria-label="post link to 【アーカイブ】webp 画像形式でファイルサイズが 92% 削減された" href=https://b-hood.site/articles/webp/></a></article><footer class=page-footer><nav class=pagination><a class=next href=/page/2/>次のページ »</a></nav></footer></main><footer class=footer><span>&copy; 2020 <a href=https://b-hood.site/>B-Hood Tech Blog</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top" accesskey=g><button class=top-link id=top-link type=button><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});});});var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script></body></html>